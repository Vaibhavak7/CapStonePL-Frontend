<!-- Header Start -->

<div class="property-header">
    <h1 class="header-title">
        <span class="header-property-name">{{ property?.propertyName }}</span>
        <span class="separator">|</span>
        <span class="header-property-city">{{ property?.city }}</span>
    </h1>
    <div class="header-info">
        <span class="header-max-guests">Max Guests: {{ property?.maxGuests }}</span>
        <span class="header-rent">|</span>
        <span class="header-rent">Rent: ₹{{ property?.rent }}</span>
        <span class="header-rent">|</span>
        <div class="header-reviews">
            <span class="header-review-stars" *ngFor="let star of getStars(property?.avgRating)">
                <i [class]="star"></i>
            </span>
        </div>
        <!-- Wishlist Icon -->
        <button class="wishlist-button" (click)="toggleWishlist()"  *ngIf="auth.isLoggedIn">
            <span class="wishlist-icon">
                <i class="bi bi-heart" [ngClass]="{'active': isWished}"></i>
            </span>
        </button>
    </div>
</div>



<!-- Header end  -->
<!-- pROPERTY SCROLLER START  -->
<!-- <div id="carouselExampleFade" class="carousel slide carousel-fade custom-carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="https://cdn.sanity.io/images/ocl5w36p/production/d0b9849ac7fb4174cc9a55956f7c2740a818ad8b-1401x1120.png?w=768&auto=format&dpr=2" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="../../../assets/Shinchan.jpg" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="../../../assets/photoBuilding.png" class="d-block w-100" alt="...">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div> -->
<!-- Images start  -->
<div class="container my-5">
    <app-slider></app-slider>
</div>
<!-- <div class="container mt-5">
    <div class="row ">


        <div class="col-8 rounded ">
            <img src="https://cdn.sanity.io/images/ocl5w36p/production/d0b9849ac7fb4174cc9a55956f7c2740a818ad8b-1401x1120.png?w=768&auto=format&dpr=2"
                class="img-fluid h-75 mt-2 " style="border-radius: 10px;" />
        </div>

        <div class="col-4 shadow-lg rounded border-0">
            <div class="card border-0">
                <img src="../../../assets/wishlistbuilding1.png" class="img-fluid my-3" />
            </div>
            <div class="card border-0">
                <img src="../../../assets/wishlistbuilding2.png" class="img-fluid mb-3" />
            </div>


        </div>
    </div>
</div> -->
<hr />

<!-- Images End  -->

<!-- Body Text Start -->

<div class="container">
    <div class="row mt-4">
        <div class="col-12 text-center">
            <h2 class="mt-4 titledes">{{property?.propertyName}}</h2>
            <div class="d-flex justify-content-center mt-3">
                <div class="stars">
                    <span *ngFor="let star of getStars(property?.avgRating)">
                        <i [class]="star"></i>
                    </span>
                </div>
            </div>
            
        </div>

        <div class="col-12 mt-4 d-flex justify-content-center amenities-container">
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon awesome-shower.png" alt="shower" class="img-fluid"
                        style="height: 25px" />
                </span>
                Finished Baths
            </h5>
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon ionic-ios-bed.png" alt="bed" class="img-fluid"
                        style="height: 25px" />
                </span>
                Spacious Bedrooms
            </h5>
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon ionic-md-tv.png" alt="tv" class="img-fluid" style="height: 25px" />
                </span>
                Luxuries Livings
            </h5>
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon awesome-parking.png" alt="parking" class="img-fluid"
                        style="height: 25px" />
                </span>
                Ample Parking Space
            </h5>
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon map-park.png" alt="park" class="img-fluid" style="height: 25px" />
                </span>
                Play Area
            </h5>
            <h5 class="mb-5 amenities">
                <span class="me-2">
                    <img src="../../../assets/Icon map-tennis.png" alt="tennis" class="img-fluid"
                        style="height: 25px" />
                </span>
                Tennis Court
            </h5>
        </div>
    </div>
</div>


<!-- new -->


<!-- end  -->

<!-- Property details start  -->
<hr />
<div class="property-layout">
    <div class="property-info">
        <div class="info-section">
            <h2 class="property-name1">{{ property?.propertyName }}</h2>
            <p class="property-description">{{ property?.description }}</p>
            <div class="property-details">
                <div class="detail-item">
                    <span class="detail-label">Type of Property:</span>
                    <span class="detail-value">{{ property?.typeOfProperty }}</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Property Age:</span>
                    <span class="detail-value">{{ property?.howOldProperty }} years</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Max Guests:</span>
                    <span class="detail-value">{{ property?.maxGuests }}</span>
                </div>
            </div>
            <div class="property-features">
                <div class="features-heading">Features</div>
                <div class="features-list">
                    <div *ngFor="let feature of features" class="feature-item">
                        {{ feature }}
                    </div>
                </div>
            </div>
            <div class="address-property">
                <span class="detail-label">Address:</span>
                <span class="detail-value">{{ property?.address1 }}, {{ property?.address2 }},{{property?.area}},
                    {{property?.city}},{{property?.state}}-{{property?.zipcode}}
                </span>
            </div>
        </div>
    </div>

    <!-- <div class="booking-sidebar">
        <div class="sidebar-content">
            <div class="pricing-section">
                <div class="pricing-details">
                    <div class="price-info">
                        <span class="price">₹20,011</span>
                        <span class="discounted-price">₹12,006</span>
                        <span class="price-per-night">night</span>
                    </div>
                </div>
                <div class="dates-selector">
                    <button class="change-dates">
                        <div class="check-in">
                            <div class="label">Check-in</div>
                            <div class="date">10/3/2024</div>
                        </div>
                        <div class="check-out">
                            <div class="label">Checkout</div>
                            <div class="date">10/8/2024</div>
                        </div>
                    </button>
                </div>
                <div class="guests-selector">
                    <button class="guests-button">
                        <div class="label">Guests</div>
                        <div class="guests-count">1 guest</div>
                    </button>
                </div>
                <div class="reserve-section">
                    <button class="reserve-button">
                        <span class="reserve-text">Reserve</span>
                    </button>
                </div>
                <div class="pricing-summary">
                    <div class="nightly-rate">
                        <span class="rate-description">₹20,011 x 5 nights</span>
                        <span class="total-price">₹1,00,054</span>
                    </div>
                    <div class="discount">
                        <span class="discount-description">Long stay discount</span>
                        <span class="discount-amount">-₹40,022</span>
                    </div>
                    <div class="total-before-taxes">
                        <span class="total-description">Total before taxes</span>
                        <span class="total-amount">₹... (Add the exact amount)</span>
                    </div>
                </div>
            </div>
        </div>
    </div> -->


    <div class="booking-sidebar">
        <div class="sidebar-content">
            <div class="pricing-section">
                <div class="pricing-details">
                    <div class="price-info">
                        <span class="price">{{ discountedPrice }}</span>
                        <span class="price-per-night">/per night</span>
                    </div>
                </div>
                <div class="dates-selector">
                    <label class="check-in">
                        <div class="label">Check-in</div>
                        <input type="date" 
                               [(ngModel)]="checkInDate" 
                               (ngModelChange)="onCheckInDateChange($event)" 
                               [min]="minDate" />
                        <div class="selected-date">Selected: {{ checkInDate | date: 'dd-MM-yyyy' }}</div>
                    </label>
                    <label class="check-out">
                        <div class="label">Check-out</div>
                        <input type="date" 
                               [(ngModel)]="checkOutDate" 
                               (ngModelChange)="onCheckOutDateChange($event)" 
                               [min]="checkInDate ? addDays(checkInDate, 1) : minDate" />
                        <div class="selected-date">Selected: {{ checkOutDate | date: 'dd-MM-yyyy' }}</div>
                    </label>
                    

                </div> 
                <div class="guests-selector">
                    <label class="guests-label">Guests: </label>
                    <select [(ngModel)]="guestsCount">
                        <option *ngFor="let guest of guestOptions" [value]="guest">{{ guest }}</option>
                    </select>
                </div>
                <div class="reserve-section">
                    <!-- Button shown if user is logged in -->
                    <button class="reserve-button" *ngIf="auth.isLoggedIn" 
                            (click)="onReserveClick()" 
                            [disabled]="!checkInDate || !checkOutDate">
                      <span class="reserve-text">Reserve</span>
                    </button>
                    <button class="reserve-button" *ngIf="!auth.isLoggedIn" 
                    [routerLink]="['/signin']"  >
                      <span class="reserve-text">Please Login</span>
                    </button>
                  
                    <!-- Button shown if user is NOT logged in -->
                    <!-- <button class="login-button" *ngIf="!auth.isLoggedIn" 
                            [routerLink]="['/sign-in']">
                      <span class="login-text">Please Login</span>
                    </button> -->
                  </div>
                  
                  
                <div class="pricing-summary">
                    <div class="nightly-rate">
                        <span class="rate-description">Details: </span>
                        <span class="rate-description">{{ originalPrice }} x {{ calculateNights() }} nights</span>

                    </div>
                    <div class="total-before-taxes">
                        <span class="total-description">Total before taxes: </span>
                        <span class="total-amount">{{ totalPrice }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


<!-- Property Details End  -->

<!-- Review cards Start-->
<!-- <div class="container mb-5">
        <h2 class="des0 text-center mb-5">REVIEWS</h2>
        <div class="row g-3 justify-content-around">
            <div class="col-md-4" *ngFor="let review of reviews, let i=index">
                <div id="review-card" class="card border-0 mb-5 shadow-lg">
                    <div class="row g-0">
                        <div class="col-4">
                            <img src="../../assets/man.png" class="img-fluid h-100 p-2 rounded-start" alt="...">
                        </div>
                        <div class="col-8">
                            <div class="card-body">
                                <img src="https://raw.githubusercontent.com/parithoshpoojary/property-listing/resources/Resources%20-%20Main/Images/stars.png"
                                    alt="stars" class="w-75 mb-3">
                                
                                <p class="card-text cont-med">{{review.comment}}</p>
                                <p class="card-text cont-name"><small>Reviewed at {{i+2}} dec</small>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
<hr />
<h1 class="review-heading">Reviews ({{ reviews.length }})</h1>
<div class="mx-auto">
    <div class="review-slider-container">
        <div class="slider-wrapper">
            <div *ngFor="let review of displayedReviews" class="review-slide">
                <img src="../../../assets/heroimg.png" alt="{{review.feedbackId}}" class="review-image">
                <p class="review-text">{{ review.comment }}</p>
                    <span class="header-review-stars" *ngFor="let star of getStars(review.rating)">
                        <i [class]="star"></i>
                    </span>
                <h3 class="review-author">{{ review.user.userName }}</h3>
                <p class="review-position">{{ review.postedDate }}</p>
            </div>
        </div>

        <!-- Navigation Arrows -->
        <button (click)="previousSlide()" class="prev-slide">❮</button>
        <button (click)="nextSlide()" class="next-slide">❯</button>
    </div>
</div>





<!-- Review cards End-->

<!-- Review Form Start -->
<!-- <div class="container my-5">
        <div class="card border-0 shadow-lg mx-5" style="border-radius: 15px;">
            <h5 class="text-center mt-4">REVIEW</h5>
            <form (ngSubmit)="userReview(reviewForm)" #reviewForm="ngForm">
                <div class="my-4 mx-5">
                    <label for="exampleInputEmail1" class="form-label"></label>
                    <input type="text" name="userName" ngModel class="form-control py-3 review-des border-0"
                        id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="USERNAME">
                </div>
                <img src="https://raw.githubusercontent.com/parithoshpoojary/property-listing/resources/Resources%20-%20Main/Images/stars.png"
                    alt="stars" class="w-25 mb-2 ms-5">
                <div class="mb-4 mx-5">
                    <label for="exampleFormControlTextarea1" class="form-label"></label>
                    <textarea name="review" ngModel class="form-control review-des border-0"
                        id="exampleFormControlTextarea1" rows="3" placeholder="REVIEW"></textarea>
                </div>
                <a type="button" class="btn blcolor mt-3 mb-5 ms-5 px-4 py-3 shadow-lg" aria-current="page">
                    SUBMIT
                    <span><img src="../../assets/rightarrow.png" alt="arrow" class="img-fluid ms-3"
                            style="height: 20px" /></span>
                </a>
            </form>
        </div>
    </div> -->
<!-- Review Form End -->